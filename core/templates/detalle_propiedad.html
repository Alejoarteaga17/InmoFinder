{% extends "base.html" %}
{% load static %}
{% block content %}
<style>
    .slider {
        display: flex;
        overflow-x: auto;
        gap: 16px;
        scroll-behavior: smooth;
    }
    .slide {
        min-width: 300px;
        flex-shrink: 0;
    }
</style>

<div class="detalle-propiedad">

    <!-- Galer√≠a tipo slider -->
    <div class="galeria">
        {% if media_validas %}
            {% for m in media_validas %}
                <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    {% if m.es_video %}
                        <video class="d-block w-100" controls style="max-height:400px; object-fit:cover;">
                            <source src="{{ m.archivo.url }}" type="video/mp4">
                        </video>
                    {% else %}
                        <img src="{{ m.archivo.url }}" class="d-block w-100" alt="{{ propiedad.nombre }}" style="max-height:400px; object-fit:cover;">
                    {% endif %}
                </div>
            {% endfor %}
        {% else %}
            <div class="carousel-item active">
                <img src="{% static 'images/default.jpg' %}" class="d-block w-100" alt="Sin imagen" style="max-height: 400px; object-fit: cover;">
            </div>
        {% endif %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#galeriaPropiedad" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#galeriaPropiedad" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
    </button>

    <!-- Informaci√≥n de la propiedad -->
    <div class="info-propiedad">
        <h1>{{ propiedad.nombre }}</h1>
        <p class="price">$ {{ propiedad.precio_total|floatformat:0 }} COP</p>
        <p class="price-m2">${{ propiedad.precio_m2|floatformat:0 }} COP/m¬≤</p>
        <p class="location">üìç {{ propiedad.ubicacion }}</p>

        <ul class="detalles">
            <li><b>√Årea:</b> {{ propiedad.area }} m¬≤</li>
            <li><b>Habitaciones:</b> {{ propiedad.habitaciones }}</li>
            <li><b>Ba√±os:</b> {{ propiedad.bannos }}</li>
            <li><b>Parqueaderos:</b> {{ propiedad.parqueaderos }}</li>
            <li><b>Garaje:</b> {% if propiedad.garaje %}S√≠{% else %}No{% endif %}</li>
            <li><b>Mascotas:</b> {% if propiedad.mascotas %}Permitidas{% else %}No permitidas{% endif %}</li>
            <li><b>Disponibilidad:</b> {{ propiedad.fecha_disponibilidad }}</li>
        </ul>

        <h3>Descripci√≥n</h3>
        <p>{{ propiedad.descripcion }}</p>

        {% if propiedad.zonas_comunes %}
        <h3>Zonas comunes</h3>
        <p>{{ propiedad.zonas_comunes }}</p>
        {% endif %}
    </div>

</div>
{% endblock %}
