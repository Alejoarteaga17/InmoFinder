{% extends "base.html" %}
{% load static %}

{% block title %}Home · InmoFinder{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/main.css' %}">
{% endblock %}


{% block content %}
<section class="container hero">
  <div class="row align-items-start">
    <!-- Lado izquierdo -->
    <div class="col-lg-6">
      <h1 class="display-5 mb-0 text-ink alineado-filtros">
        Smart real estate platform for buyers, sellers, and agents.
      </h1>

      <p class="lead space-h1-lead text-muted-1 alineado-filtros">
        Find, publish, and manage properties with ease. Our platform connects buyers, renters,
        and real estate professionals through verified listings, smart search filters,
        and secure communication tools.
      </p>

      <!-- Buscador -->
      <div class="controls-row d-flex align-items-center space-lead-search alineado-filtros"> 
        <div class="search-wrap w-100 d-flex justify-content-start">
          <form method="get" action="{% url 'buscar_propiedades' %}" class="search position-relative width-100" style="max-width:430px;">
            <span class="search-icon"><i class="bi bi-search"></i></span>
            <input class="form-control search-input" type="text" name="search" placeholder="Buscar por ubicación, nombre o descripción">
          </form>
        </div>
      </div>

      <!-- Chips ubicaciones -->
      <div class="d-flex flex-wrap chips space-search-chips justify-content-start alineado-filtros">
        <a href="{% url 'buscar_propiedades' %}?search=Poblado" class="chip"><i class="bi bi-geo-alt"></i> Poblado</a>
        <a href="{% url 'buscar_propiedades' %}?search=Envigado" class="chip"><i class="bi bi-geo-alt"></i> Envigado</a>
        <a href="{% url 'buscar_propiedades' %}?search=Laureles" class="chip"><i class="bi bi-geo-alt"></i> Laureles</a>
        <a href="{% url 'buscar_propiedades' %}?search=Sabaneta" class="chip"><i class="bi bi-geo-alt"></i> Sabaneta</a>
      </div>
    </div>

    <!-- Lado derecho -->
    <div class="col-lg-6 text-center mt-5 mt-lg-0">
      <img src="{% static 'images/default.jpg' %}" alt="Casa moderna" class="img-fluid shadow hero-img">
    </div>
    {% include "partials/buscador.html" %}
  </div>

  <!-- Carrusel de propiedades -->
  <div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="mb-0">Propiedades Disponibles</h1>
  <a href="{% url 'buscar_propiedades' %}" class="text-dark d-flex align-items-center">
    <i class="bi bi-eye me-1"></i> View All
  </a>
</div>

  {% if propiedades %}
  <div id="carouselPropiedades" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">

  {% for propiedad in propiedades %}
  {% if forloop.counter0|divisibleby:4 %}
  <div class="carousel-item {% if forloop.first %}active{% endif %}">
    <div class="row justify-content-center">
  {% endif %}

      {% include "partials/property_card.html" %}

  {% if forloop.counter|divisibleby:4 or forloop.last %}
    </div>
  </div>
  {% endif %}
{% endfor %}

    </div>

    <!-- Controles carrusel -->
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselPropiedades" data-bs-slide="prev" style="left:-100px;">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselPropiedades" data-bs-slide="next" style="right:-100px;">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>
  {% else %}
  <p class="text-center">No hay propiedades disponibles.</p>
  {% endif %}
</section>
{% endblock %}
